(()=>{let e=document.documentElement.clientWidth,t=gsap.matchMedia(),a=0,r=0;function n(){gsap.utils.toArray("[scrub-wrapper]").forEach(t=>{let n=t.dataset.prefix,l=t.dataset.suffix,s=Number(t.dataset.framecount),m=t.querySelector("canvas");m&&n&&l&&s&&(r+=s,a+=s,function(e,t,a,r,n,l){let s=t.getContext("2d"),m=t.parentElement;t.width=m.clientWidth,t.height=m.clientHeight;let h=e=>`${a}${l}/${(e+1).toString().padStart(3,"0")}${r}`,c=[],u=0;for(let a=0;a<n;a++){let r=new Image,l=h(a);r.onload=()=>{u++,o(),0===a&&d(c,{frame:0},s,t),u===n&&i(e,c,s,t)},r.onerror=()=>{u++,o(),u===n&&i(e,c,s,t)},r.src=l,c.push(r)}}(t,m,n,l,s,e>=768?"desktop":"mobile"))})}function o(){0==--a&&setTimeout(()=>{lenis.resize()},500)}function i(e,t,a,r){let n={frame:0};e.querySelectorAll("[frames-play]").forEach(e=>{let n=Number(e.dataset.start),o=Number(e.dataset.end),i=(o-n)/30,l={frame:0};if(console.log(e.dataset),"autoplaySequence"in e.dataset){let s=e.dataset.autoplayDelay?Number(e.dataset.autoplayDelay):0;console.log("autoplaySequence",e.dataset.autoplaySequence,n,o,i,s),window.scrollY<=1?gsap.to(l,{frame:o-1,duration:i,ease:"none",snap:"frame",delay:s,onUpdate:()=>d(t,l,a,r)}):(l.frame=o-1,d(t,l,a,r))}else gsap.timeline({onUpdate:()=>d(t,l,a,r),scrollTrigger:{trigger:e,pin:!1,scrub:1,start:e.dataset.startPos||"top top",end:e.dataset.endPos||"bottom bottom",markers:!1}}).fromTo(l,{frame:n-1},{frame:o-1,snap:"frame",ease:"none",duration:1},0)}),d(t,n,a,r),window.addEventListener("resize",()=>{let e=r.parentElement;r.width=e.clientWidth,r.height=e.clientHeight,d(t,n,a,r)})}function d(e,t,a,r){let n=e[t.frame];a.clearRect(0,0,r.width,r.height);let o=Math.max(r.width/n.width,r.height/n.height),i=n.width*o,d=n.height*o,l=r.width/2-i/2,s=r.height/2-d/2;a.drawImage(n,l,s,i,d)}t.add("(min-width: 768px)",()=>{n()}),t.add("(max-width: 767px)",()=>{n()})})();
//# sourceMappingURL=scrubImageSequence.js.map
