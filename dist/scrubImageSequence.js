(()=>{let e=document.documentElement.clientWidth,t=gsap.matchMedia(),a=0,r=0;function i(){gsap.utils.toArray("[scrub-wrapper]").forEach(t=>{let i=t.dataset.prefix,l=t.dataset.suffix,s=Number(t.dataset.framecount),m=t.querySelector("canvas");m&&i&&l&&s&&(r+=s,a+=s,function(e,t,a,r,i,l){let s=t.getContext("2d"),m=t.parentElement;t.width=m.clientWidth,t.height=m.clientHeight;let h=e=>`${a}${l}/${(e+1).toString().padStart(3,"0")}${r}`,c=[],u=0;for(let a=0;a<i;a++){let r=new Image,l=h(a);r.onload=()=>{u++,n(),0===a&&d(c,{frame:0},s,t),u===i&&o(e,c,s,t)},r.onerror=()=>{u++,n(),u===i&&o(e,c,s,t)},r.src=l,c.push(r)}}(t,m,i,l,s,e>=768?"desktop":"mobile"))})}function n(){0==--a&&setTimeout(()=>{lenis.resize()},500)}function o(e,t,a,r){let i={frame:0};e.querySelectorAll("[frames-play]").forEach(e=>{let i=Number(e.dataset.start),n=Number(e.dataset.end),o={frame:0};if("autoplaySequence"in e.dataset){let l=e.dataset.autoplayDelay?Number(e.dataset.autoplayDelay):0;window.scrollY<=1?gsap.to(o,{frame:n-1,duration:(n-i)/30,ease:"none",snap:"frame",delay:l,onUpdate:()=>d(t,o,a,r)}):(o.frame=n-1,d(t,o,a,r))}else gsap.timeline({onUpdate:()=>d(t,o,a,r),scrollTrigger:{trigger:e,pin:!1,scrub:1,start:e.dataset.startPos||"top top",end:e.dataset.endPos||"bottom bottom",markers:!1}}).fromTo(o,{frame:i-1},{frame:n-1,snap:"frame",ease:"none",duration:1},0)}),d(t,i,a,r),window.addEventListener("resize",()=>{let e=r.parentElement;r.width=e.clientWidth,r.height=e.clientHeight,d(t,i,a,r)})}function d(e,t,a,r){let i=e[t.frame];a.clearRect(0,0,r.width,r.height);let n=Math.max(r.width/i.width,r.height/i.height),o=i.width*n,d=i.height*n,l=r.width/2-o/2,s=r.height/2-d/2;a.drawImage(i,l,s,o,d)}t.add("(min-width: 768px)",()=>{i()}),t.add("(max-width: 767px)",()=>{i()})})();
//# sourceMappingURL=scrubImageSequence.js.map
